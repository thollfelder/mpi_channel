<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MPI_Channel: src/RMA/SPSC/RMA_SPSC_BUF.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MPI_Channel
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_957240939c41b3e0b90ba346b14c999c.html">RMA</a></li><li class="navelem"><a class="el" href="dir_6d43a172fc1b4fd94e86383c9981ba46.html">SPSC</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">RMA_SPSC_BUF.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header of RMA SPSC BUF Channel.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_m_p_i___channel___struct_8h_source.html">../../MPI_Channel_Struct.h</a>&quot;</code><br />
</div>
<p><a href="_r_m_a___s_p_s_c___b_u_f_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5aaa8e2656bc24698d497b34e07b8cd5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#a5aaa8e2656bc24698d497b34e07b8cd5">channel_alloc_rma_spsc_buf</a> (<a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *ch)</td></tr>
<tr class="memdesc:a5aaa8e2656bc24698d497b34e07b8cd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the properties of a passed <a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> of type RMA SPSC BUF and returns it.  <a href="_r_m_a___s_p_s_c___b_u_f_8h.html#a5aaa8e2656bc24698d497b34e07b8cd5">More...</a><br /></td></tr>
<tr class="separator:a5aaa8e2656bc24698d497b34e07b8cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb1711ed35ed8b632bdd75a19d96d941"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#abb1711ed35ed8b632bdd75a19d96d941">channel_send_rma_spsc_buf</a> (<a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *ch, void *data)</td></tr>
<tr class="memdesc:abb1711ed35ed8b632bdd75a19d96d941"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the numbers of bytes of a data element specified in <a class="el" href="_m_p_i___channel_8c.html#aa8c734c22b85cf3b6833402b8b3c7b31" title="Allocates and returns a fully constructed MPI_Channel with passed parameter as channel properties.">channel_alloc()</a> starting at the adress the void pointer holds into the channel. Calling <a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#abb1711ed35ed8b632bdd75a19d96d941" title="Sends the numbers of bytes of a data element specified in channel_alloc() starting at the adress the ...">channel_send_rma_spsc_buf()</a> blocks only if the channel buffer has reached the channel capacity.  <a href="_r_m_a___s_p_s_c___b_u_f_8h.html#abb1711ed35ed8b632bdd75a19d96d941">More...</a><br /></td></tr>
<tr class="separator:abb1711ed35ed8b632bdd75a19d96d941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954d0d1d20d6184b9005ac9ae852a4a7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#a954d0d1d20d6184b9005ac9ae852a4a7">channel_receive_rma_spsc_buf</a> (<a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *ch, void *data)</td></tr>
<tr class="memdesc:a954d0d1d20d6184b9005ac9ae852a4a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives the numbers of bytes of a data element specified in <a class="el" href="_m_p_i___channel_8c.html#aa8c734c22b85cf3b6833402b8b3c7b31" title="Allocates and returns a fully constructed MPI_Channel with passed parameter as channel properties.">channel_alloc()</a> from the channel and stores them starting at the adress the void pointer holds. Calling <a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#a954d0d1d20d6184b9005ac9ae852a4a7" title="Receives the numbers of bytes of a data element specified in channel_alloc() from the channel and sto...">channel_receive_rma_spsc_buf()</a> blocks only if no element has arrived and the internal buffer stores no message.  <a href="_r_m_a___s_p_s_c___b_u_f_8h.html#a954d0d1d20d6184b9005ac9ae852a4a7">More...</a><br /></td></tr>
<tr class="separator:a954d0d1d20d6184b9005ac9ae852a4a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a575b3748a190847b96598936ef9c741f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#a575b3748a190847b96598936ef9c741f">channel_peek_rma_spsc_buf</a> (<a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *ch)</td></tr>
<tr class="memdesc:a575b3748a190847b96598936ef9c741f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peeks at the channel and signals if messages can be sent (sender process calls) or received (receiver process calls).  <a href="_r_m_a___s_p_s_c___b_u_f_8h.html#a575b3748a190847b96598936ef9c741f">More...</a><br /></td></tr>
<tr class="separator:a575b3748a190847b96598936ef9c741f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8267aadce35bc53fa06b0e5237740a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#ab8267aadce35bc53fa06b0e5237740a2">channel_free_rma_spsc_buf</a> (<a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *ch)</td></tr>
<tr class="memdesc:ab8267aadce35bc53fa06b0e5237740a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocates the channel and all allocated members.  <a href="_r_m_a___s_p_s_c___b_u_f_8h.html#ab8267aadce35bc53fa06b0e5237740a2">More...</a><br /></td></tr>
<tr class="separator:ab8267aadce35bc53fa06b0e5237740a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header of RMA SPSC BUF Channel. </p>
<dl class="section author"><dt>Author</dt><dd>Toni Hollfelder (<a href="#" onclick="location.href='mai'+'lto:'+'Ton'+'i.'+'Hol'+'lf'+'eld'+'er'+'@un'+'i-'+'bay'+'re'+'uth'+'.d'+'e'; return false;">Toni.<span style="display: none;">.nosp@m.</span>Holl<span style="display: none;">.nosp@m.</span>felde<span style="display: none;">.nosp@m.</span>r@un<span style="display: none;">.nosp@m.</span>i-bay<span style="display: none;">.nosp@m.</span>reut<span style="display: none;">.nosp@m.</span>h.de</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2021-01-19 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>CC BY 4.0 (<a href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a>)</dd></dl>
<p>This RMA SPSC BUF channel implementation uses passive target communication since active target communication is not suited for this kind of channel. MPI_Win_fence() works as barrier over all processes of the communicator which prohibits asynchronous communication. MPI Post-Start-Complete-Wait is basically suitable but shows disadvantages compared to passive target communication. This is due to the fact that this implementation uses a ciruclar buffer stored at the receiver process and a distributed read and write index where the read index is located at the receiver process and points to the first sent element and the write index is located at the sender process and points to the latest free memory location. The advantage of using passive target synchronization is that both processes can use a shared lock and access the windows of the other process concurrently to put or get the data element and update the respective index. MPI PSCW has the disadvantage that it only allows exposure and access epochs bot not both concurrently.</p>
<p>Regarding progress guarantees this implementation is wait-free under the requirement that the internal buffer is neither empty nor full which means that <a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#abb1711ed35ed8b632bdd75a19d96d941" title="Sends the numbers of bytes of a data element specified in channel_alloc() starting at the adress the ...">channel_send_rma_spsc_buf()</a> and <a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#a954d0d1d20d6184b9005ac9ae852a4a7" title="Receives the numbers of bytes of a data element specified in channel_alloc() from the channel and sto...">channel_receive_rma_spsc_buf()</a> will complete in a fixed number of steps independently of the other process. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a5aaa8e2656bc24698d497b34e07b8cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aaa8e2656bc24698d497b34e07b8cd5">&#9670;&nbsp;</a></span>channel_alloc_rma_spsc_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a>* channel_alloc_rma_spsc_buf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the properties of a passed <a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> of type RMA SPSC BUF and returns it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ch</td><td>Pointer to a <a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> allocated with <a class="el" href="_m_p_i___channel_8c.html#aa8c734c22b85cf3b6833402b8b3c7b31" title="Allocates and returns a fully constructed MPI_Channel with passed parameter as channel properties.">channel_alloc()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a pointer to a valid <a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> with updated properties if updating was successful and NULL otherwise </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Returns NULL if MPI related functions or allocation memory failure happend. </dd></dl>

</div>
</div>
<a id="ab8267aadce35bc53fa06b0e5237740a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8267aadce35bc53fa06b0e5237740a2">&#9670;&nbsp;</a></span>channel_free_rma_spsc_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel_free_rma_spsc_buf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deallocates the channel and all allocated members. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Pointer to a <a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> of type RMA MPSC BUF. <br  />
 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 since deallocation is always successfull </dd></dl>

</div>
</div>
<a id="a575b3748a190847b96598936ef9c741f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a575b3748a190847b96598936ef9c741f">&#9670;&nbsp;</a></span>channel_peek_rma_spsc_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel_peek_rma_spsc_buf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Peeks at the channel and signals if messages can be sent (sender process calls) or received (receiver process calls). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Pointer to a <a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> of type RMA SPSC BUF. <br  />
 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the current number of elements which can be sent if the sender process calls or the number of elemets which can be received if the receiver process calls. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Returns -1 if internal problems with MPI related functions happen. </dd></dl>

</div>
</div>
<a id="a954d0d1d20d6184b9005ac9ae852a4a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954d0d1d20d6184b9005ac9ae852a4a7">&#9670;&nbsp;</a></span>channel_receive_rma_spsc_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel_receive_rma_spsc_buf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives the numbers of bytes of a data element specified in <a class="el" href="_m_p_i___channel_8c.html#aa8c734c22b85cf3b6833402b8b3c7b31" title="Allocates and returns a fully constructed MPI_Channel with passed parameter as channel properties.">channel_alloc()</a> from the channel and stores them starting at the adress the void pointer holds. Calling <a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#a954d0d1d20d6184b9005ac9ae852a4a7" title="Receives the numbers of bytes of a data element specified in channel_alloc() from the channel and sto...">channel_receive_rma_spsc_buf()</a> blocks only if no element has arrived and the internal buffer stores no message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Pointer to a <a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> of type RMA SPSC BUF. <br  />
 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to a memory adress of which size bytes will be received to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if receiving was successful, -1 otherwise. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Returns -1 if internal problems with MPI related functions happend. </dd></dl>

</div>
</div>
<a id="abb1711ed35ed8b632bdd75a19d96d941"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb1711ed35ed8b632bdd75a19d96d941">&#9670;&nbsp;</a></span>channel_send_rma_spsc_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel_send_rma_spsc_buf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the numbers of bytes of a data element specified in <a class="el" href="_m_p_i___channel_8c.html#aa8c734c22b85cf3b6833402b8b3c7b31" title="Allocates and returns a fully constructed MPI_Channel with passed parameter as channel properties.">channel_alloc()</a> starting at the adress the void pointer holds into the channel. Calling <a class="el" href="_r_m_a___s_p_s_c___b_u_f_8h.html#abb1711ed35ed8b632bdd75a19d96d941" title="Sends the numbers of bytes of a data element specified in channel_alloc() starting at the adress the ...">channel_send_rma_spsc_buf()</a> blocks only if the channel buffer has reached the channel capacity. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Pointer to a <a class="el" href="struct_m_p_i___channel.html">MPI_Channel</a> of type RMA SPSC BUF. <br  />
 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to a memory adress of which size bytes will be sent from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if sending was successful, -1 otherwise. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Returns -1 if internal problems with MPI related functions happend. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
